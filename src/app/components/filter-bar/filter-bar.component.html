<form [formGroup]="form" class="filter-bar">
  <ng-container *ngFor="let field of fields">
    <ng-container [ngSwitch]="field.type">
      <mat-form-field *ngSwitchCase="'text'" appearance="fill">
        <mat-label>{{ field.label }}</mat-label>
        <input matInput [formControlName]="field.key" type="text" />
      </mat-form-field>
      
      <mat-form-field *ngSwitchCase="'select'" appearance="fill">
        <mat-label>{{ field.label }}</mat-label>
        <mat-select [formControlName]="field.key" multiple>
          <mat-option *ngFor="let option of field.options" [value]="option">
            {{ option }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      
      <mat-form-field *ngSwitchCase="'boolean'" appearance="fill">
        <mat-label>{{ field.label }}</mat-label>
        <mat-select [formControlName]="field.key">
          <mat-option [value]="undefined">All</mat-option>
          <mat-option [value]="true">Private</mat-option>
          <mat-option [value]="false">Public</mat-option>
        </mat-select>
      </mat-form-field>      
    </ng-container>
  </ng-container>
</form>
